<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mealkit.mapper.CommentMapper">

	<!-- id 속성은 DAO 의 메소드와 같아야 한다. 여기의 boardVO 는 mybatis-confg.xml 에 Alias 되어 
		있습니다. -->
	<select id="list" resultType="com.mealkit.board.CommentVO">
		select
		*
		from
		review
		where pid =
		#{pid}
		order by rno desc
	</select>

	<select id="create">
		insert into review (pid, mId, content)
		values
		(#{pid},#{mId},#{content})
	</select>
	<update id="update">
		update review set content = #{content},
		regdate =
		sysdate
		where rno = #{rno}
	</update>

	<delete id="delete">
		delete from review where rno =#{rno}
	</delete>


	<select id="listPage" resultType="CommentVO">
		select
		*
		from
		review
		where
		pid =
		#{pid}
		order by rno desc
		limit #{cri.pageStart}, #{cri.perPageNum}
	</select>

	<select id="count" resultType="int">
		select count(pid) from review
		where pid =#{pid}
	</select>


	<select id="getPid" resultType="int">
		select pid from review where rno
		= #{rno}
	</select>
	
</mapper>
